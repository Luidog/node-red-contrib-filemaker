<script type="text/javascript">
  RED.nodes.registerType("dapi-status", {
    category: "FileMaker",
    defaults: {
      name: { value: null, required: false },
      client: { value: "", type: "dapi-client" },
      output: { value: "payload", required: true }
    },
    inputs: 1,
    outputs: 1,
    icon: "status.png",
    color: "#39D1C0",
    paletteLabel: "Status",
    label: function() {
      return this.name || "Client Status";
    },
    oneditprepare: function() {
      $("#node-input-output").typedInput({
        default: "msg",
        types: ["msg"]
      });
    }
  });
</script>

<script type="text/x-red" data-template-name="dapi-status">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag" aria-hidden="true"></i> <span>Name</span></label>
    <input type="text" id="node-input-name" placeholder="Specific Node">
  </div>
  <hr>
  <div class="form-row">
    <label for="node-input-client"><i class="fa fa-cogs" aria-hidden="true"></i> <span>Client</span></label>
    <input type="text" id="node-input-client">
  </div>
  <hr>
  <div class="form-row">
    <label for="node-input-output"><i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i> <span>Output</span></label>
    <input type="hidden" id="node-input-outputType">
    <input type="text" id="node-input-output">
  </div>
</script>

<script type="text/x-red" data-help-name="dapi-status">
  <p>
    This node gets the Data API client status information.
  </p>

  <h3>Inputs</h3>
  <dl class="message-properties">
    <dt>payload
      <span class="property-type">Any</span>
        <dd>This node accepts any payload.</dd>
      </dt>
  </dl>

  <h3>Outputs</h3>
  <ol class="node-ports">
    <li>Standard Output
      <dl class="message-properties">
        <dt>data<span class="property-type">Object</span>
          <dd>Incoming / Outgoing data statistics.</dd>
        </dt>
        <dt>queue<span class="property-type">Array</span>
          <dd>Queued Data API requests.</dd>
        </dt>
        <dt>pending<span class="property-type">Array</span>
          <dd>Pending Data API requests.</dd>
        </dt>
        <dt>sessions<span class="property-type">Array</span>
          <dd>The client's open sessions</dd>
        </dt>
      </dl>
    </li>
    <li>Standard Error
      <dl class="message-properties">
        <dt>message <span class="property-type">String</span>
          <dd>The FileMaker or client error message.</dd>
        </dt>
      </dl>
    </li>
  </ol>

  <h3>Details</h3>
  <p>
    This node gets the client status information.<br/><br/>
    The default output of this node is <code>msg.payload</code>. This node can also be configured to merge its
    output with any property on the <code>msg</code> object.
  </p>

  <h3>References</h3>
  <ul>
    <li><a href="https://github.com/Luidog/fms-api-client#client-status">Client Status Method</a> - Base Client Method Documentation</li>
    <li><a href="https://github.com/Luidog/node-red-contrib-filemaker">Node-RED FileMaker</a> - The Node's Github Repository</li>
    <li><a href="https://github.com/Luidog/fms-api-client">Data API Client</a> - Data API Client Github Repository</li>
  </ul>
</script>
